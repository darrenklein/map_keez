# MapKeez

Convert map keys from atom to string or string to atom.

## Installation

## Use

**MapKeez** provides three methods for converting the keys of a map between strings and atoms -

#### to_string_keys/2

Convert atom keys to string keys.

```elixir
(1)> map = %{foo: "bar", baz: "bim"}
%{baz: "bim", foo: "bar"}
(2)> map |> MapKeez.to_string_keys()
%{"baz" => "bim", "foo" => "bar"}
```

#### to_atom_keys!/2

Safely convert string keys to atom keys by way of `String.to_existing_atom()`. This method will raise an `Argument` error if any keys cannot be successfully converted. If you need to convert keys to atoms, this is probably your best bet - if you're not familiar with why this is, see [this article](https://erlef.github.io/security-wg/secure_coding_and_deployment_hardening/atom_exhaustion.html) on atom exhaustion.

```elixir
(1)> map = %{"foo" => "bar", "baz" => "bim"}
%{"baz" => "bim", "foo" => "bar"}
(2)> map |> MapKeez.to_atom_keys!()
** (ArgumentError) errors were found at the given arguments:

  * 1st argument: invalid UTF8 encoding
```

```elixir
(1)> _safe_atoms = [:foo, :baz]
[:foo, :baz]
(2)> map = %{"foo" => "bar", "baz" => "bim"}
%{"baz" => "bim", "foo" => "bar"}
(3)> map |> MapKeez.to_atom_keys!()
%{baz: "bim", foo: "bar"}
```

#### to_atom_keys_unsafe/2

As the name implies, unsafely convert string keys to atom keys by way of `String.to_atom()`. In generaly, you should prefer `to_atom_keys!/2` unless it's simply not a viable option and/or you are confident that you won't risk exhausting your atom table by doing something like converting a map whose keys were generated by arbitrary user input.

```elixir
(1)> map = %{"foo" => "bar", "baz" => "bim"}
%{"baz" => "bim", "foo" => "bar"}
(2)> map |> MapKeez.to_atom_keys_unsafe()
%{baz: "bim", foo: "bar"}
```

### Options

`recursive :: boolean`

### Notes

#### Structs

Struct keys will not be converted by **MapKeez**. This applies to any map keys found within maps or lists within a struct as well, in the event that you should provide the `[recursive: true]` option.
